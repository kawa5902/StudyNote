# 測定の誤差

## 何回もテストを受検すると成績はどうなるのか

普通はテストは一回しか受検しませんが，
仮に何回も受検したとしたら，その成績はどう変わるのでしょうか。
ここでは，テストが2PLに従うと仮定して，
能力値0の受験生が1000回テストを受けた場面を想定してみましょう。
項目数は15題，識別力はすべて0.9，
困難度は-3から1の範囲で等間隔に分布しているとします。

```{r}
# パラメータ設定
set.seed(123)
item_n <- 15 # 問題数
n_simulations <- 1000 # テストの受験回数
theta <- 0 # 学力（真の能力）
a_para <- rep(0.9, item_n) # 識別力（全項目で固定）
b_para <- seq(-3, 1, length.out = item_n) # 難易度（均等に分布）

# 2PLモデルの確率計算
prob_2pl <- function(theta, a, b) {
  1 / (1 + exp(-1.7 * a * (theta - b)))
}

# スコアシミュレーション
resp <- t(sapply(1:n_simulations, function(x) {
  # 各項目の正答確率
  prob <- prob_2pl(theta, a_para, b_para)
  # 正誤データの生成
  resp <- rbinom(item_n, size = 1, prob = prob)
}))

score <- apply(resp, 1, sum)

hist(score, main = "", xlab = "正答数", ylab = "頻度")
```

ほぼ満点に近い（15題中14問の正答）場合も，半分もできない（15題中6問の正答）場合もありえるということです。

```{r}
c(
  lower = mean(score) - 2 * sd(score),
  upper = mean(score) + 2 * sd(score)
)
```

正答数の分布が正規分布に従うと仮定して，
±2標準偏差の範囲を計算してみると，
だいたい8問から13問くらいのあいだで正答数がバラつくということになります。
正答数を問題数（15題）で割って正答率に変換すると，およそ5割から9割の範囲で正答率はバラつきます。
先ほどのヒストグラムからも明らかですが，
半分しかできないというケースから9割正解まで考えられるということです。

「ヤマが当たった」という言葉があることからも，
テストを受けたときにたまたまできた／できなかったという
ことが起こることはよく知られています。
ただ，実際に数値化してみると「思ったよりバラつきが大きいぞ」と
感じる人もいるかもしれません。
何にせよ，これだけ結果がバラつくとなると，
1回のテストの正答率を学力の指標にすることは
だいぶ危ういことのように思われます。
